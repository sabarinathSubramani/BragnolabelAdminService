<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
	<changeSet author="sabarinath_subramani" id="6">
		<createTable catalogName="bragnolabel" schemaName="bragnolabel"
			tableName="order_line_items">
			<column autoIncrement="true" name="id" type="INT UNSIGNED">
				<constraints nullable="false" primaryKey="true" />
			</column>
			<column name="order_item_id" type="BIGINT UNSIGNED">
				<constraints nullable="false" />
			</column>
			<column defaultValue="" name="product_title" type="VARCHAR(1000)" />
			<column defaultValue="" name="quantity" type="INT UNSIGNED" />
			<column defaultValueNumeric="0.0" name="total_price" type="DOUBLE(10, 2)" />
			<column defaultValue="" name="weight" type="DOUBLE(10, 2)" />
			<column defaultValue="" name="sku" type="VARCHAR(32)" />
			<column defaultValue="" name="tax_type" type="VARCHAR(10)" />
			<column defaultValue="" name="tax_rate" type="DOUBLE(10, 2)" />
			<column defaultValue="" name="orderid" type="BIGINT">
				<constraints foreignKeyName="orderid" />
			</column>
		</createTable>
		<createTable catalogName="bragnolabel" schemaName="bragnolabel"
			tableName="shipping_address">
			<column autoIncrement="true" name="id" type="INT UNSIGNED">
				<constraints primaryKey="true" primaryKeyName="pk_id" />
			</column>
			<column defaultValue="" name="full_name" type="VARCHAR(100)" />
			<column defaultValue="" name="address1" type="VARCHAR(300)" />
			<column defaultValue="" name="address2" type="VARCHAR(300)" />
			<column defaultValue="" name="city" type="VARCHAR(32)" />
			<column defaultValue="" name="state" type="VARCHAR(20)" />
			<column defaultValue="" name="pincode" type="INT UNSIGNED" />
			<column defaultValue="" name="phone" type="INT UNSIGNED" />
			<column defaultValue="" name="email" type="VARCHAR(100)" />
			<column defaultValue="" name="country" type="VARCHAR(32)" />
			<column defaultValue="" name="gstin" type="VARCHAR(20)" />
		</createTable>
		<addUniqueConstraint catalogName="bragnolabel"
			columnNames="order_item_id" constraintName="order_item_id_unique"
			schemaName="bragnolabel" tableName="order_line_items" />
	</changeSet>
	<changeSet author="sabarinath_subramani" id="7">
		<addForeignKeyConstraint baseColumnNames="orderid"
			baseTableName="order_line_items" constraintName="fk_orderid"
			onDelete="CASCADE" onUpdate="RESTRICT" referencedColumnNames="orderid"
			referencedTableName="orders" />
	</changeSet>
	<changeSet author="sabarinath_subramani" id="8">
		<addColumn catalogName="bragnolabel" schemaName="bragnolabel"
			tableName="orders">
			<column defaultValue="" name="tax_type" type="VARCHAR(10)" />
			<column defaultValue="" name="tax_rate" type="DOUBLE(10, 2)" />
			<column defaultValue="" name="tracking_number" type="VARCHAR(20)" />
			<column defaultValue="" name="tracking_url" type="VARCHAR(300)" />
			<column defaultValue="" name="shipping_address_id" type="INT" />
		</addColumn>
	</changeSet>
	<changeSet author="sabarinath_subramani" id="10">
		<addDefaultValue catalogName="bragnolabel"
			columnDataType="int" columnName="shipping_address_id" defaultValue="-1"
			schemaName="bragnolabel" tableName="orders" />
	</changeSet>
	<changeSet author="sabarinath_subramani" id="11">
		<dropDefaultValue catalogName="bragnolabel"
			columnDataType="int" columnName="shipping_address_id" schemaName="bragnolabel"
			tableName="orders" />
	</changeSet>
	<changeSet author="sabarinath_subramani" id="12">
		<addForeignKeyConstraint baseColumnNames="shipping_address_id"
			baseTableName="orders" constraintName="fk_shipping_address_id"
			onDelete="CASCADE" onUpdate="RESTRICT" referencedColumnNames="id"
			referencedTableName="shipping_address" />
	</changeSet>

</databaseChangeLog>